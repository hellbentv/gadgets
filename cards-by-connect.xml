<Module>
<ModulePrefs title="__MSG_gadget.twodimensionalfilterstats.title__" directory_title="__MSG_gadget.twodimensionalfilterstats.title__" description="__MSG_gadget.twodimensionalfilterstats.description__" author="Atlassian" author_affiliation="Atlassian" author_location="Sydney, Australia" height="100" screenshot="https://cards.linaro.org/s/en_US-q9q11i-1988229788/6097/7/6.0.2/_/download/resources/com.atlassian.jira.gadgets:two-dimensional-stats-gadget/twoDimensionalStats-screenshot.png" thumbnail="https://cards.linaro.org/s/en_US-q9q11i-1988229788/6097/7/6.0.2/_/download/resources/com.atlassian.jira.gadgets:two-dimensional-stats-gadget/twoDimensionalStats-thumb.png">
<Optional feature="gadget-directory">
<Param name="categories">JIRA</Param>
</Optional>
<Require feature="setprefs"/>
<Require feature="views"/>
<Optional feature="atlassian.util"/>
<Optional feature="auth-refresh"/>
<Require feature="settitle"/>
<Require feature="dynamic-height"/>
<Require feature="oauthpopup"/>
<OAuth>
<Service>
<Access url="https://cards.linaro.org/plugins/servlet/oauth/access-token" method="POST"/>
<Request url="https://cards.linaro.org/plugins/servlet/oauth/request-token" method="POST"/>
<Authorization url="https://cards.linaro.org/plugins/servlet/oauth/authorize?oauth_callback=http%3A%2F%2Foauth.gmodules.com%2Fgadgets%2Foauthcallback"/>
</Service>
</OAuth>
<Locale>
<messagebundle>
<msg name="gadget.common.invalid.period">Invalid period ''{0}'' specified</msg>
<msg name="gadget.common.cumulative.description">
Progressively add totals (1.. 2.. 3), or show individual values (1.. 1.. 1).
</msg>
<msg name="gadget.common.advanced.search">Advanced Search</msg>
<msg name="gadget.common.issuesresolved">Issues Resolved</msg>
<msg name="gadget.common.oauth.approve.button">Login approve</msg>
<msg name="gadget.common.categories.all">All Categories</msg>
<msg name="gadget.common.days.description">Days (including today) to show in the graph.</msg>
<msg name="gadget.common.cumulative.label">Cumulative Totals:</msg>
<msg name="gadget.common.required.query">No project or filter specified.</msg>
<msg name="gadget.common.projects.description">The projects to display information for.</msg>
<msg name="gadget.common.columns.to.display.label">Columns to display</msg>
<msg name="gadget.common.stattype.label">Statistic Type:</msg>
<msg name="gadget.common.period.daily">Daily</msg>
<msg name="gadget.common.container.oauth.required">Authentication required to use this gadget</msg>
<msg name="gadget.common.projects.and.categories.description">
Projects or categories to use as the basis for the graph.
</msg>
<msg name="gadget.common.quick.find">Quick Find</msg>
<msg name="gadget.common.period.hourly">Hourly</msg>
<msg name="gadget.common.invalid.stat.type">Invalid Statistics Type ({0})</msg>
<msg name="gadget.common.invalid.jql">Invalid JQL.</msg>
<msg name="gadget.common.manage.filters">Manage Filters</msg>
<msg name="gadget.common.invalid.project">Invalid project</msg>
<msg name="gadget.common.invalid.filter.id">Invalid filter</msg>
<msg name="gadget.common.filter.description">Saved filter to use for the query.</msg>
<msg name="gadget.common.period.yearly">Yearly</msg>
<msg name="gadget.common.period.name.label">Period:</msg>
<msg name="gadget.common.show.column.headers.description">Helps to distinguish between similar fields</msg>
<msg name="gadget.common.invalid.filter">Invalid project or filter</msg>
<msg name="gadget.common.show.column.headers.label">Show column headers</msg>
<msg name="gadget.common.oauth.approve.message">
If you are a registered user, there may be more information available to you. You will need to log in and approve this gadget''s access to your account. (<a class='ag-show-requests' href="#">Show Restricted URLs</a>)
</msg>
<msg name="gadget.common.error.500">
An internal server error occurred when requesting resource <a href="{0}" target="_parent">{1}</a>.
</msg>
<msg name="gadget.common.negative.days">Days must be greater or equal to zero.</msg>
<msg name="gadget.common.days.overlimit">Days must not exceed {0}</msg>
<msg name="gadget.common.show.column.headers.true.label">Yes</msg>
<msg name="gadget.common.filter.label">Saved Filter:</msg>
<msg name="gadget.common.num.description">Number of results to display (maximum of 50).</msg>
<msg name="gadget.common.default.columns">Default Columns</msg>
<msg name="gadget.common.project.edit">Click here to select/change project.</msg>
<msg name="gadget.common.unknown.legacy.portlet">Unknown Legacy Portlet</msg>
<msg name="gadget.common.period.name.description">The length of periods represented on the graph.</msg>
<msg name="gadget.common.config.unavailable">
There are problems with the current configuration for this gadget. The errors below may have been caused by the deletion of entities required by the gadget or by changes to your permissions.
</msg>
<msg name="gadget.common.indexing.configure">Please {0}configure indexing{1}.</msg>
<msg name="gadget.common.unknown.legacy.portlet.description">
Legacy portlet with key ''{0}'' could not be loaded
</msg>
<msg name="gadget.common.projects.and.categories.label">Projects and Categories:</msg>
<msg name="gadget.common.cancel">Cancel</msg>
<msg name="gadget.common.configure">Edit</msg>
<msg name="gadget.common.projects.label">Projects:</msg>
<msg name="gadget.common.projects.all">All Projects</msg>
<msg name="gadget.common.days.nan">Days must be a number</msg>
<msg name="gadget.common.num.high">Number must be less than or equal to 50</msg>
<msg name="gadget.common.error.save.dashboard">Error rendering save to dashboard form.</msg>
<msg name="gadget.common.no">No</msg>
<msg name="gadget.common.chart.period">Period: last {0}{1}{2} days (grouped {3}{4}{5})</msg>
<msg name="gadget.common.save">Save</msg>
<msg name="gadget.common.period.monthly">Monthly</msg>
<msg name="gadget.common.issues">Issues</msg>
<msg name="gadget.common.filter">Filter:</msg>
<msg name="gadget.common.refresh.never">Never</msg>
<msg name="gadget.common.projects.and.categories.mixed">You can not mix categories and projects.</msg>
<msg name="gadget.common.num.overlimit">Number must not exceed {0}</msg>
<msg name="gadget.common.num.negative">Number must be greater than 0</msg>
<msg name="gadget.common.period.quarterly">Quarterly</msg>
<msg name="gadget.common.add.filter">Add filter</msg>
<msg name="gadget.common.categories">Categories</msg>
<msg name="gadget.common.authrequired">
Please login <strong>OR</strong> contact Administrator to <a href='http://confluence.atlassian.com/display/DOC/External+Gadgets'>configure Application Link</a>
</msg>
<msg name="gadget.common.required.project.or.filter">Please select a filter or project</msg>
<msg name="gadget.common.issuesunresolved">Issues Unresolved</msg>
<msg name="gadget.common.period.name">Period</msg>
<msg name="gadget.common.show.column.headers.false.label">No</msg>
<msg name="gadget.common.period.weekly">Weekly</msg>
<msg name="gadget.common.filterid.edit">Click here to select/change filter or project.</msg>
<msg name="gadget.common.all.projects.and.others">
''All Projects'' can not be selected along with other projects
</msg>
<msg name="gadget.common.indexing">
Indexing is currently not configured so no issue searching can be performed.
</msg>
<msg name="gadget.common.projects">Projects</msg>
<msg name="gadget.common.columns.to.display.description">Default columns:</msg>
<msg name="gadget.common.filterid.none.selected">No Filter/Project selected</msg>
<msg name="gadget.common.refresh.description">How often you would like this gadget to update</msg>
<msg name="gadget.common.filters">Filters</msg>
<msg name="gadget.common.filterid.description">
Project or saved filter to use as the basis for the graph.
</msg>
<msg name="gadget.common.days.overlimit.for.period">Days must not exceed {0} for {1} period</msg>
<msg name="gadget.common.error.404">
The resource <a href="{0}" target="parent">{1}</a>, cannot be found.
</msg>
<msg name="gadget.common.refresh.minutes">Every {0} Minutes</msg>
<msg name="gadget.common.error.generation">
Unfortunately, one or more of your preferences are now unavailable. Please update your preferences, or remove gadget by clicking delete from the title bar above.
</msg>
<msg name="gadget.common.all.categories.and.others">
''All Categories'' can not be selected along with other categories
</msg>
<msg name="gadget.common.num.label">Number of Results:</msg>
<msg name="gadget.common.anonymous.is.invalid">This gadget requires a logged in user.</msg>
<msg name="gadget.common.project.none.selected">No project selected</msg>
<msg name="gadget.common.indexing.admin">
Please contact your administrator to get indexing configured.
</msg>
<msg name="gadget.common.project.description">Project to use as the basis for the graph.</msg>
<msg name="gadget.common.days.label">Days Previously:</msg>
<msg name="gadget.common.no.filter.id">You must specify a filter.</msg>
<msg name="gadget.common.refresh.hours">Every {0} Hours</msg>
<msg name="gadget.common.num.nan">
The value must be an integer greater than 0 and less than or equal to 50
</msg>
<msg name="gadget.common.projects.and.categories.none.selected">No project/category selected</msg>
<msg name="gadget.common.anonymous.filter">Anonymous Filter</msg>
<msg name="gadget.common.project.label">Project:</msg>
<msg name="gadget.common.invalid.projectOrFilterId">Invalid project or filter</msg>
<msg name="gadget.common.invalid.projectOrFilterId.query.prefix">Your query can not start with ''*'' or ''?''</msg>
<msg name="gadget.common.refresh.label">Refresh Interval:</msg>
<msg name="gadget.common.stattype.description">
Select which type of statistic to display for this filter.
</msg>
<msg name="gadget.common.filterid.label">Project or Saved Filter:</msg>
<msg name="gadget.common.refresh.hour">Every {0} Hour</msg>
<msg name="gadget.common.invalid.filter.validationfailed">The selected filter {0} has an error: {1}.</msg>
<msg name="gadget.common.yes">Yes</msg>
<msg name="gadget.common.reload">Refresh</msg>
<msg name="gadget.common.filter.none.selected">No Filter selected</msg>
<msg name="gadget.common.invalid.projectCategory">Invalid Project Category</msg>
<msg name="gadget.twodimensionalfilterstats.sort.direction.asc.label">Ascending</msg>
<msg name="gadget.twodimensionalfilterstats.nodata">
The filter for this gadget did not return any issues
</msg>
<msg name="gadget.twodimensionalfilterstats.sort.by.natural.label">Natural</msg>
<msg name="gadget.twodimensionalfilterstats.num.description">Number of results to display.</msg>
<msg name="gadget.twodimensionalfilterstats.description">
Display statistics of issues returned from specified filter
</msg>
<msg name="gadget.twodimensionalfilterstats.sort.by.label">Sort By</msg>
<msg name="gadget.twodimensionalfilterstats.total.xaxis">T:</msg>
<msg name="gadget.twodimensionalfilterstats.sort.by.total.label">Total</msg>
<msg name="gadget.twodimensionalfilterstats.show.totals.description">
Whether to show totals for each of the columns and rows.
</msg>
<msg name="gadget.twodimensionalfilterstats.sort.direction.desc.label">Descending</msg>
<msg name="gadget.twodimensionalfilterstats.total.yaxis">Total Unique Issues</msg>
<msg name="gadget.twodimensionalfilterstats.ystattype.label">YAxis</msg>
<msg name="gadget.twodimensionalfilterstats.more">Show more</msg>
<msg name="gadget.twodimensionalfilterstats.show.totals.label">Show Totals</msg>
<msg name="gadget.twodimensionalfilterstats.title.specific">Two Dimensional Filter Statistics: {0}</msg>
<msg name="gadget.twodimensionalfilterstats.less">Show less</msg>
<msg name="gadget.twodimensionalfilterstats.showing">Showing {0} of {1} statistics.</msg>
<msg name="gadget.twodimensionalfilterstats.title">Two Dimensional Filter Statistics</msg>
<msg name="gadget.twodimensionalfilterstats.sort.by.description">Sort by row total or natural field order.</msg>
<msg name="gadget.twodimensionalfilterstats.show.totals.false.label">No</msg>
<msg name="gadget.twodimensionalfilterstats.show.totals.true.label">Yes</msg>
<msg name="gadget.twodimensionalfilterstats.sort.direction.label">Sort Direction</msg>
<msg name="gadget.twodimensionalfilterstats.xstattype.label">XAxis</msg>
<msg name="gadget.twodimensionalfilterstats.sort.direction.description"></msg>
</messagebundle>
</Locale>
</ModulePrefs>
<UserPref name="isConfigured" datatype="hidden" default_value="false"/>
<UserPref name="isPopup" datatype="hidden" default_value="false"/>
<UserPref name="filterId" datatype="hidden"/>
<UserPref name="xstattype" datatype="hidden" default_value="assignees"/>
<UserPref name="ystattype" datatype="hidden" default_value="assignees"/>
<UserPref name="sortBy" datatype="hidden" default_value="natural"/>
<UserPref name="sortDirection" datatype="hidden" default_value="asc"/>
<UserPref name="showTotals" datatype="hidden" default_value="false"/>
<UserPref name="numberToShow" datatype="hidden" default_value="5"/>
<UserPref name="refresh" datatype="hidden" default_value="false"/>
<UserPref name="more" datatype="hidden" default_value="false"/>
<Content type="html" view="profile,canvas,home,default">
<![CDATA[
<link type="text/css" rel="stylesheet" href="https://cards.linaro.org/s/en_US-q9q11i-1988229788/6097/7/5.0.1/_/download/batch/com.atlassian.auiplugin:ajs-gadgets-base/com.atlassian.auiplugin:ajs-gadgets-base.css" media="all"> <!--[if lte IE 8]> <link type="text/css" rel="stylesheet
]]>
<![CDATA[
" href="https://cards.linaro.org/s/en_US-q9q11i-1988229788/6097/7/5.0.1/_/download/batch/com.atlassian.auiplugin:ajs-gadgets-base/com.atlassian.auiplugin:ajs-gadgets-base.css?conditionalComment=lte+IE+8" media="all"> <![endif]--> <link type="text/css" rel="stylesheet" href="https://cards.linaro.org/
]]>
<![CDATA[
s/en_US-q9q11i-1988229788/6097/7/3.2.0-m26/_/download/batch/com.atlassian.gadgets.publisher:ajax/com.atlassian.gadgets.publisher:ajax.css" media="all"> <link type="text/css" rel="stylesheet" href="https://cards.linaro.org/s/en_US-q9q11i-1988229788/6097/7/3.2.0-m26/_/download/batch/com.atlassian.gadgets.publisher:ajs-gadgets-lite/com.atlassian.gadgets.publisher:ajs-gadgets-lite.css" media="all"> <link type="text/css" rel="stylesheet" href="https://cards.linaro.org/s/en_US-q9q11i-1988229788/6097/7/1.0/_/download/batch/jira.webresources:icons/jira.webresources:icons.css" media="all"> <link type="text/css" rel="stylesheet" href="https://cards.linaro.org/s/en_US-q9q11i-1988229788/6097/7/6.0.2/_/download/batch/com.atlassian.jira.gadgets:core-gadget-resources/com.atlassian.jira.gadgets:core-gadget-resources.css" media="all"> <link type="text/css" rel="stylesheet" href="https://cards.linaro.org/s/en_US-q9q11i-1988229788/6097/7/5.0.1/_/download/batch/com.atlassian.auiplugin:ajs-html5shim/com.atlassian.auiplugin:ajs-html5shim.css" media="all"> <link type="text/css" rel="stylesheet" href="https://cards.linaro.org/s/en_US-q9q11i-1988229788/6097/7/5.0.1/_/download/batch/com.atlassian.auiplugin:ajs/com.atlassian.auiplugin:ajs.css" media="all"> <!--[if lte IE 8]> <link type="text/css" rel="stylesheet" href="https://cards.linaro.org/s/en_US-q9q11i-1988229788/6097/7/5.0.1/_/download/batch/com.atlassian.auiplugin:ajs/com.atlassian.auiplugin:ajs.css?conditionalComment=lte+IE+8" media="all"> <![endif]--> <!--[if lte IE 9]> <link type="text/css" rel="stylesheet" href="https://cards.linaro.org/s/en_US-q9q11i-1988229788/6097/7/5.0.1/_/download/batch/com.atlassian.auiplugin:ajs/com.atlassian.auiplugin:ajs.css?conditionalComment=lte+IE+9" media="all"> <![endif]--> <link type="text/css" rel="stylesheet" href="https://cards.linaro.org/s/en_US-q9q11i-1988229788/6097/7/1.0/_/download/batch/jira.webresources:list-styles/jira.webresources:list-styles.css" media="all"> <link type="text/css" rel="stylesheet" href="https://cards.linaro.org/s/en_US-q9q11i-1988229788/6097/7/1.0/_/download/batch/jira.webresources:inline-layer/jira.webresources:inline-layer.css" media="all"> <link type="text/css" rel="stylesheet" href="https://cards.linaro.org/s/en_US-q9q11i-1988229788/6097/7/1.0/_/download/batch/jira.webresources:autocomplete/jira.webresources:autocomplete.css" media="all"> <script type="text/javascript" src="https://cards.linaro.org/s/en_US-q9q11i-1988229788/6097/7/5.0.1/_/download/batch/com.atlassian.auiplugin:jquery-lib/com.atlassian.auiplugin:jquery-lib.js" ></script> <script type="text/javascript" src="https://cards.linaro.org/s/en_US-q9q11i-1988229788/6097/7/5.0.1/_/download/batch/com.atlassian.auiplugin:jquery-compatibility/com.atlassian.auiplugin:jquery-compatibility.js" ></script> <script type="text/javascript" src="https://cards.linaro.org/s/en_US-q9q11i-1988229788/6097/7/5.0.1/_/download/batch/com.atlassian.auiplugin:aui-core/com.atlassian.auiplugin:aui-core.js" ></script> <script type="text/javascript" src="https://cards.linaro.org/s/en_US-q9q11i-1988229788/6097/7/5.0.1/_/download/batch/com.atlassian.auiplugin:ajs-gadgets-base/com.atlassian.auiplugin:ajs-gadgets-base.js" ></script> <script type="text/javascript" src="https://cards.linaro.org/s/en_US-q9q11i-1988229788/6097/7/3.2.0-m26/_/download/batch/com.atlassian.gadgets.publisher:templates/com.atlassian.gadgets.publisher:templates.js" ></script> <script type="text/javascript" src="https://cards.linaro.org/s/en_US-q9q11i-1988229788/6097/7/3.2.0-m26/_/download/batch/com.atlassian.gadgets.publisher:util/com.atlassian.gadgets.publisher:util.js" ></script> <script type="text/javascript" src="https://cards.linaro.org/s/en_US-q9q11i-1988229788/6097/7/3.2.0-m26/_/download/batch/com.atlassian.gadgets.publisher:ajax/com.atlassian.gadgets.publisher:ajax.js" ></script> <script type="text/javascript" src="https://cards.linaro.org/s/en_US-q9q11i-1988229788/6097/7/3.2.0-m26/_/download/batch/com.atlassian.gadgets.publisher:ajs-gadgets-lite/com.atlassian.gadgets.publisher:ajs-gadgets-lite.js" ></script> <script type="text/javascript" src="https://cards.linaro.org/s/en_US-q9q11i-1988229788/6097/7/1.0/_/download/batch/jira.webresources:util-lite/jira.webresources:util-lite.js" ></script> <script type="text/javascript" src="https://cards.linaro.org/s/en_US-q9q11i-1988229788/6097/7/6.0.2/_/download/batch/com.atlassian.jira.gadgets:core-gadget-resources/com.atlassian.jira.gadgets:core-gadget-resources.js" ></script> <script type="text/javascript" src="https://cards.linaro.org/s/en_US-q9q11i-1988229788/6097/7/5.0.1/_/download/batch/com.atlassian.auiplugin:ajs-contextpath/com.atlassian.auiplugin:ajs-contextpath.js" ></script> <!--[if lte IE 8]> <script type="text/javascript" src="https://cards.linaro.org/s/en_US-q9q11i-1988229788/6097/7/5.0.1/_/download/batch/com.atlassian.auiplugin:ajs-html5shim/com.atlassian.auiplugin:ajs-html5shim.js?conditionalComment=lte+IE+8" ></script> <![endif]--> <script type="text/javascript" src="https://cards.linaro.org/s/en_US-q9q11i-1988229788/6097/7/5.0.1/_/download/batch/com.atlassian.auiplugin:ajs/com.atlassian.auiplugin:ajs.js" ></script> <!--[if lte IE 8]> <script type="text/javascript" src="https://cards.linaro.org/s/en_US-q9q11i-1988229788/6097/7/5.0.1/_/download/batch/com.atlassian.auiplugin:ajs/com.atlassian.auiplugin:ajs.js?conditionalComment=lte+IE+8" ></script> <![endif]--> <script type="text/javascript" src="https://cards.linaro.org/s/en_US-q9q11i-1988229788/6097/7/1.0/_/download/batch/jira.webresources:browser-properties/jira.webresources:browser-properties.js" ></script> <script type="text/javascript" src="https://cards.linaro.org/s/en_US-q9q11i-1988229788/6097/7/5.0.1/_/download/batch/com.atlassian.auiplugin:ajs-underscorejs/com.atlassian.auiplugin:ajs-underscorejs.js" ></script> <script type="text/javascript" src="https://cards.linaro.org/s/en_US-q9q11i-1988229788/6097/7/5.0.1/_/download/batch/com.atlassian.auiplugin:ajs-backbone/com.atlassian.auiplugin:ajs-backbone.js" ></script> <script type="text/javascript" src="https://cards.linaro.org/s/en_US-q9q11i-1988229788/6097/7/2.1.0/_/download/batch/com.atlassian.soy.soy-template-plugin:soy-deps/com.atlassian.soy.soy-template-plugin:soy-deps.js" ></script> <script type="text/javascript" src="https://cards.linaro.org/s/en_US-q9q11i-1988229788/6097/7/1.0/_/download/batch/jira.webresources:util/jira.webresources:util.js" ></script> <script type="text/javascript" src="https://cards.linaro.org/s/en_US-q9q11i-1988229788/6097/7/1.0/_/download/batch/jira.webresources:content-retrievers/jira.webresources:content-retrievers.js" ></script> <script type="text/javascript" src="https://cards.linaro.org/s/en_US-q9q11i-1988229788/6097/7/1.0/_/download/batch/jira.webresources:inline-layer/jira.webresources:inline-layer.js" ></script> <script type="text/javascript" src="https://cards.linaro.org/s/en_US-q9q11i-1988229788/6097/7/1.0/_/download/batch/jira.webresources:list/jira.webresources:list.js" ></script> <script type="text/javascript" src="https://cards.linaro.org/s/en_US-q9q11i-1988229788/6097/7/1.0/_/download/batch/jira.webresources:autocomplete/jira.webresources:autocomplete.js" ></script> <script type="text/javascript"> gadgets.window.setTitle("__MSG_gadget.twodimensionalfilterstats.title__"); (function () { var gadget = AJS.Gadget({ baseUrl: "https://cards.linaro.org", useOauth: "/rest/gadget/1.0/currentUser", config: { descriptor: function (args) { var gadget = this; var statType = function(name) { return { userpref: name, label: gadget.getMsg("gadget.twodimensionalfilterstats." + name + ".label"), type: "select", selected: gadget.getPref(name), options: args.statType.stats }; }; var option = function(type, value) { return { label:gadget.getMsg("gadget.twodimensionalfilterstats." + type + "." + value + ".label"), value: value }; }; return { action: "/rest/gadget/1.0/twodimensionalfilterstats/validate", theme : function () { if (gadgets.window.getViewportDimensions().width < 450) { return "gdt top-label"; } else { return "gdt"; } }(), fields: [ AJS.gadget.fields.filterPicker(gadget, "filterId"), statType("xstattype"), statType("ystattype"), { userpref: "sortBy", label: gadget.getMsg("gadget.twodimensionalfilterstats.sort.by.label"), description: gadget.getMsg("gadget.twodimensionalfilterstats.sort.by.description"), type: "select", selected: gadget.getPref("sortBy"), options: [ option("sort.by", "natural"), option("sort.by", "total") ] }, { userpref: "sortDirection", label: gadget.getMsg("gadget.twodimensionalfilterstats.sort.direction.label"), type: "select", selected: gadget.getPref("sortDirection"), options: [ option("sort.direction", "asc"), option("sort.direction", "desc") ] }, { userpref: "showTotals", label: gadget.getMsg("gadget.twodimensionalfilterstats.show.totals.label"), description: gadget.getMsg("gadget.twodimensionalfilterstats.show.totals.description"), type: "select", selected: gadget.getPref("showTotals"), options: [ option("show.totals", "true"), option("show.totals", "false") ] }, { userpref: "numberToShow", label: gadget.getMsg("gadget.common.num.label"), description:gadget.getMsg("gadget.twodimensionalfilterstats.num.description"), type: "text", value: gadget.getPref("numberToShow") }, AJS.gadget.fields.nowConfigured() ] }; }, args: [ { key: "statType", ajaxOptions: "/rest/gadget/1.0/statTypes" } ] }, view: { enableReload: true, template: function (args) { var gadget = this; // reset view gadget.getView().empty(); gadget.getView().addClass("g-two-d-stats"); var filter = args.twod_stats.filter; gadgets.window.setTitle(AJS.format("__MSG_gadget.twodimensionalfilterstats.title.specific__", filter.filterTitle)); // This is used to pass the name of filter or project to the picker gadget.projectOrFilterName = filter.filterTitle; if (args.twod_stats.filter.empty) { gadget.getView().append(AJS.$("<div/>").text(gadget.getMsg("gadget.twodimensionalfilterstats.nodata"))); return; } var makeCellMarkup = function(ele, cell) { if (cell.classes) { ele.addClass(cell.classes.join(" ")); } ele.html(cell.markup); }; var buildTable = function (headingsRow, xHeading, yHeading, rows) { var table = AJS.$("<table><tbody></tbody></table>").attr("id", "twodstatstable").addClass("basic"); var tableHeaderRow = AJS.$("<tr/>"); tableHeaderRow.append(AJS.$("<th/>").attr("rowspan", "2").addClass("twodstatstable_table_header").text(yHeading)); tableHeaderRow.append(AJS.$("<th/>").attr("colSpan", headingsRow.cells.length).text(xHeading)); table.append(tableHeaderRow); addTableRow(table, headingsRow, "<th/>"); for (var row in rows) { addTableRow(table, rows[row], "<td/>"); } return table; }; /* Add a new table row to the bottom of the table */ var addTableRow = function addTableRow(jQtable, theRow, elementMarkup) { jQtable.each(function() { var row = AJS.$("<tr/>"); var cells = theRow.cells; for (var j = 0; j < cells.length; j++) { var cell = cells[j]; var col = AJS.$(elementMarkup); makeCellMarkup(col, cell); row.append(col); } jQtable.append(row); }); }; var getRowsDisplayed = function() { if (args.twod_stats.rows) { if (args.twod_stats.showTotals) { return args.twod_stats.rows.length - 1; } else { return args.twod_stats.rows.length; } } return 0; }; var getMoreLink = function() { var numPref = parseInt(gadget.getPref("numberToShow")); if (getRowsDisplayed() > numPref) { return AJS.$("<a/>").text(gadget.getMsg("gadget.twodimensionalfilterstats.less")).click(function() { gadget.savePref("more", "false"); gadget.showView(true); }); } if (getRowsDisplayed() < args.twod_stats.totalRows) { return AJS.$("<a/>").text(gadget.getMsg("gadget.twodimensionalfilterstats.more")).click(function() { gadget.savePref("more", "true"); gadget.showView(true); }); } }; var gagView = gadget.getView(); var desc = filter.filterDescription; var title = filter.filterTitle; if (desc && desc !== "") { title += " - " + desc; } gagView.append(AJS.$("<div id=\"content\" />").append(AJS.$("<div/>").addClass("overflow").append( buildTable(args.twod_stats.firstRow, args.twod_stats.xHeading, args.twod_stats.yHeading, args.twod_stats.rows) ).append( AJS.$("<p/>").addClass("more").append( getMoreLink() ) ).append( AJS.$("<div/>").addClass("table-footer").append( AJS.$("<div/>").append(AJS.format(gadget.getMsg("gadget.twodimensionalfilterstats.showing"), "<strong>" + getRowsDisplayed() + "</strong>", "<strong>" + args.twod_stats.totalRows + "</strong>")) ).append( AJS.$("<div/>").text(gadget.getMsg("gadget.common.filter") + " ").append( AJS.$("<a/>").attr({ href: filter.filterUrl, title: title, target: "_parent" }).text(filter.filterTitle) ) ) ))); }, args: [ { key: "twod_stats", ajaxOptions: function () { var gadget = this; return { url: "/rest/gadget/1.0/twodimensionalfilterstats/generate", data: { filterId : gadgets.util.unescapeString(this.getPref("filterId")), xstattype: gadgets.util.unescapeString(this.getPref("xstattype")), showTotals: gadgets.util.unescapeString(this.getPref("showTotals")), sortDirection: gadgets.util.unescapeString(this.getPref("sortDirection")), sortBy: gadgets.util.unescapeString(this.getPref("sortBy")), ystattype: gadgets.util.unescapeString(this.getPref("ystattype")), numberToShow: function() { if (gadget.getPref("more") === "true") { return "9999"; } return gadgets.util.unescapeString(gadget.getPref("numberToShow")); }() } }; } } ] } }); })(); </script>
]]>
</Content>
</Module>
